/*TODO clean this up and remove all magic numbers */
/* TODO add themes */

/* ================== Base ================== */
body {
     font-family: sans-serif;
     background: #222;
     color: #eee;
     margin: 0;
     display: flex;
     flex-direction: row-reverse;
     /* sidebar on the right */
     height: 100vh;
     font-size: 1em;
     overflow: hidden;
}

/* ================== Buttons ================== */
button {
     padding: 6px 12px;
     border: none;
     border-radius: 4px;
     background: #0af;
     color: #222;
     cursor: pointer;
     font-size: .8em;
}

button:disabled {
     background: #555;
     cursor: not-allowed;
}

/* ================== Canvas ================== */
#canvas-container {
     flex-grow: 1;
     display: flex;
     justify-content: center;
     align-items: center;
     margin: 20px;
     box-sizing: border-box;
     overflow: auto;

     padding: 20px;
}

#canvas-container {
     margin-right: 370px;
     /* leave space for sidebar */
     flex-grow: 1;
     display: flex;
     justify-content: center;
     align-items: center;
     height: 100vh;
     max-height: 100vh;


     padding: 10px;
     box-sizing: border-box;
}



canvas {
     border: 1px solid #444;
     background-color: transparent;
     background-image: radial-gradient(#444 1px, transparent 1px);
     background-size: 18px 18px;
     image-rendering: pixelated;
     image-rendering: crisp-edges;
     display: block;
     margin: 10px;
}

/* ================== Color Palette ================== */
#color-palette {}

/* ColorPicker */
input[type="color"].circle-picker {
     -webkit-appearance: none;
     -moz-appearance: none;
     appearance: none;
     width: 40px;
     height: 40px;
     border: 1px solid white;
     border-radius: 50%;
     overflow: hidden;
     cursor: pointer;
     padding: 0;
}

input[type="color"].circle-picker::-webkit-color-swatch-wrapper {
     padding: 0;
}

input[type="color"].circle-picker::-webkit-color-swatch {
     border: none;
     border-radius: 50%;
}

input[type="color"].circle-picker::-moz-color-swatch {
     border: none;
     border-radius: 50%;
}

/* ================== File Button ================== */
.file-btn {
     background: #0af;
     border: none;
     border-radius: 6px;
     padding: 6px 12px;
     cursor: pointer;
     width: calc(100% - 24px)
}

.file-btn::file-selector-button {
     background: #0af;
     border: none;
     border-radius: 6px;
     padding: 6px 12px;
     cursor: pointer;
}

.file-btn::file-selector-button:hover {
     background: #0056b3;
}

/* ================== Inputs ================== */
input[type="number"] {
     -moz-appearance: number-input;
     /* forces spin buttons to always appear */
}

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
     width: auto;
     height: auto;
     opacity: 1;
     -webkit-appearance: inner-spin-button;
     display: block;
}

/* ================== Label + Input ================== */
.label-input {
     display: flex;
     justify-content: space-between;
     align-items: center;
     gap: 10px;
     margin-bottom: 10px;
}

.label-input label {
     flex-shrink: 0;
     width: 100px;
     color: #eee;
     text-align: left;
}

.label-input input[type="number"],
.label-input input[type="text"],
.label-input select {
     width: 80px;
     padding: 4px 6px;
     border-radius: 4px;
     border: 1px solid #555;
     background: #222;
     color: #eee;
     text-align: right;
     box-sizing: border-box;
}

.label-input input[type="number"] {
     width: 80px;
     padding: 4px 6px 4px 6px;
     border-radius: 4px;
     border: 1px solid #555;
     background: #222;
     color: #eee;
     text-align: left;
     font-size: .8em;
     box-sizing: border-box;
}

/* ================== Log Panel ================== */
#log-panel {
     background-color: black;
     color: limegreen;
     font-family: monospace;
     font-size: 12px;
     line-height: 1.2em;
     padding: 8px;
     border: 1px solid #333;
     border-radius: 4px;
     width: 100%;
     height: 200px;
     max-height: 200px;
     overflow-y: auto;
     box-sizing: border-box;
     white-space: pre-wrap;
}

/* ================== Mode Select ================== */
#modeSelect {
     width: 100%;
     margin-bottom: 0.5rem;
     font-size: .8em;
     padding: 5px;
     margin-bottom: 10px;
}

/* ================== Sidebar ================== */
#sidebar {
     position: absolute;
     right: 0;
     max-width: 350px;
     min-width: 350px;
     background: #2a2a2a;
     padding: 15px;
     display: flex;
     flex-direction: column;
     border-left: 2px solid #444;
     box-sizing: border-box;
     overflow-y: auto;
     z-index: 1000;
     height: 100vh;
     overflow-x: none;
}



/* Sidebar scrollbars */
#sidebar::-webkit-scrollbar,
#swatchesContainer::-webkit-scrollbar {
     width: 8px;
}

#sidebar::-webkit-scrollbar-thumb,
#swatchesContainer::-webkit-scrollbar-thumb {
     background: #555;
     border-radius: 4px;
}

#sidebar::-webkit-scrollbar-thumb:hover,
#swatchesContainer::-webkit-scrollbar-thumb:hover {
     background: #777;
}

#sidebar::-webkit-scrollbar-track,
#swatchesContainer::-webkit-scrollbar-track {
     background: #2a2a2a;
}

/* Sidebar sections */
.sidebar-section {
     background: #333;
     padding: 10px;
     border-radius: 8px;
     box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
     display: flex;
     flex-direction: column;
     gap: 12px;
     margin-bottom: 25px;
     border-bottom: 1px solid #555;
     margin-bottom: 8px;
     width: 295px;
}

.sidebar-section.collapsed .section-content {
     display: none;
}

.sidebar-section.floating {
     position: absolute;
     z-index: 2000;
     pointer-events: auto;
     box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
     transition: none;
}

.sidebar-section h3 {
     margin: 0 0 6px 0;
     border-bottom: 1px solid #555;
     padding-bottom: 5px;
     color: #0af;
     cursor: pointer;
     display: flex;
     align-items: center;
     justify-content: space-between;
     padding: 5px;
     margin: 0;
     background: #222;
     color: #fff;
     font-size: 14px;
}

.sidebar-section h3::after {
     content: "►";
     font-size: 12px;
     transition: transform 0.2s;
}

.sidebar-section.collapsed h3::after {
     transform: rotate(90deg);
}

.section-content {
     padding: 5px;
     display: flex;
     flex-direction: column;
}

.section-content * {
     margin: 5px;
}

.section-content button,
.section-content input[type="range"] {
     width: 100%;
}

/* ================== Spinner ================== */
.spinner {
     border: 8px solid #f3f3f3;
     border-top: 8px solid #3498db;
     border-radius: 50%;
     width: 60px;
     height: 60px;
     animation: spin 1s linear infinite;
}

@keyframes spin {
     0% {
          transform: rotate(0deg);
     }

     100% {
          transform: rotate(360deg);
     }
}

/* ================== Swatches ================== */
#swatchesContainer {
     max-height: 300px;
     overflow-y: auto;
}

.swatches {
     display: flex;
     flex-wrap: wrap;
     gap: 6px;
}

.swatch {
     width: 30px;
     height: 30px;
     border: 1px solid #000;
     cursor: pointer;
     position: relative;
     border-radius: 4px;
     margin: 2px;
}

.swatch.selected {
     outline: 2px solid red;
}

.swatch.transparent::after {
     content: '';
     position: absolute;
     inset: 0;
     background:
          repeating-linear-gradient(45deg, white 0, white 1px, transparent 1px, transparent 6px),
          repeating-linear-gradient(-45deg, white 0, white 1px, transparent 1px, transparent 6px);
     pointer-events: none;
}

.swatch.erased {
     background: repeating-linear-gradient(45deg,
               white,
               white 4px,
               transparent 4px,
               transparent 8px);
}

.swatch.erased::after {
     content: "✕";
     color: rgba(255, 255, 255, 0.9);
     font-weight: bold;
     position: absolute;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
}

.swatch.deselect::after {
     content: '×';
     position: absolute;
     inset: 0;
     display: flex;
     align-items: center;
     justify-content: center;
     color: red;
     font-weight: bold;
     pointer-events: none;
}

/* ================== Universal Scrollbars ================== */
*::-webkit-scrollbar {
     width: 10px;
     height: 10px;
}

*::-webkit-scrollbar-thumb {
     background: #555;
     border-radius: 5px;
}

*::-webkit-scrollbar-thumb:hover {
     background: #777;
}

*::-webkit-scrollbar-track {
     background: #222;
}

* {
     scrollbar-width: thin;
     scrollbar-color: #555 #222;
     scroll-behavior: smooth;
}

/*TEST*/
#canvas-wrapper {
     overflow: auto;
     width: 100%;
     height: auto;
     display: flex;
     justify-content: center;
     /* centers wrapper horizontally */
     align-items: center;
     /* centers wrapper vertically */
     overflow: auto;
}

#canvas-container {
     width: 100%;
     height: auto;

     overflow: hidden;


}

canvas {

     transform-origin: center center;
     /* scale relative to top-left */
}

#hexDisplay {
     display: inline-flex;
     align-items: center;
     gap: 6px;
     padding: 4px 8px;
     border-radius: 4px;
     background: #222;
     color: #eee;
     cursor: pointer;
     user-select: none;
     font-family: monospace;
     border: none;
}

#copyLabel {
     font-size: 0.8em;
     color: #0af;
     font-weight: bold;
     text-align: right;
}