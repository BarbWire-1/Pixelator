<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Pixelator - pixelate your image and handle colors</title>

	<!-- Include Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

	<link rel="stylesheet" href="./src/style.css">
	<script type="module" src="./src/main.js"></script>
</head>

<body>
	<div class="app-container">

		<!-- MODAL -->
		<div id="downloadModal" role="dialog" aria-labelledby="downloadModalTitle" aria-modal="true" hidden>
			<div class="modal-content">
				<h2 id="downloadModalTitle">Download Image</h2>

				<div class="form-row">
					<label for="downloadWidth">Width:</label>
					<input id="downloadWidth" type="number" />
				</div>
				<div class="form-row">
					<label for="downloadHeight">Height:</label>
					<input id="downloadHeight" type="number" />
				</div>
				<div class="form-row">
					<label>
						<input id="lockAspect" type="checkbox" checked /> Maintain aspect ratio
					</label>
				</div>

				<div class="button-row">
					<button id="cancelDownload">Cancel</button>
					<button id="confirmDownload">Download</button>
				</div>
			</div>
		</div>

		<!-- CANVAS WORKSPACE -->
		<div id="canvas-container" role="main" aria-label="Canvas workspace">
			<div id="canvas-wrapper">
				<canvas id="canvas" aria-label="Drawing canvas" role="img"></canvas>
			</div>
		</div>

		<!-- RESIZER -->
		<div id="resizer" class="resizer" role="separator" aria-orientation="vertical" aria-label="Resize workspace">
		</div>

		<!-- SIDEBAR -->
		<div id="sidebar" role="complementary"
			aria-label="Controls for file loading, history, layers, settings, tools, palette, and logs">

			<!-- File SECTION -->
			<div class="sidebar-section snapped">
				<h3>File</h3>
				<div class="section-content">
					<input type="file" id="raw-image-input" accept="image/*" class="file-btn"
						title="Select an image file">
					<button id="downloadBtn">Download Image</button>
				</div>
			</div>

			<!-- HISTORY SECTION -->
			<div class="sidebar-section snapped">
				<h3>History</h3>
				<div class="section-content">
					<button id="undoBtn" title="Undo last action">Undo</button>
					<button id="redoBtn" title="Redo last undone action">Redo</button>
				</div>
			</div>

			<!-- LAYERS VISIBILITY -->
			<div class="sidebar-section snapped">
				<h3>Layers Visibility</h3>
				<div class="section-content">
					<div id="layer-panel">
						<div class="layer-entry" data-index="0">
							<input type="checkbox" class="layer-visible" checked id="layer-bg">
							<label for="layer-bg" class="layer-name">BG Image</label>
							<input type="range" class="layer-opacity" min="0" max="1" step="0.05" value="0.5"
								aria-label="Background opacity">
						</div>
						<div class="layer-entry" data-index="1">
							<input type="checkbox" class="layer-visible" checked id="layer-px">
							<label for="layer-px" class="layer-name">PX Layer</label>
							<input type="range" class="layer-opacity" min="0" max="1" step="0.05" value="1"
								aria-label="Pixel layer opacity">
						</div>
					</div>
				</div>
			</div>

			<!-- SETTINGS & APPLY -->
			<div class="sidebar-section snapped">
				<h3>Settings & Apply</h3>
				<div class="section-content">
					<div class="label-input">
						<label for="kMeans-iter">Color Accuracy:</label>
						<input type="number" id="kMeans-iter" value="1" min="1" max="50" step="1">
					</div>

					<div class="label-input">
						<label for="tile-size-input">Tile Size:</label>
						<input type="number" id="tile-size-input" value="1" min="1">
					</div>

					<div class="label-input">
						<label for="color-count-input">Colors:</label>
						<input type="number" id="color-count-input" value="16" min="1" max="256">
					</div>

					<label for="liveUpdateInput">
						<input type="checkbox" id="liveUpdateInput"> Update Live
					</label>
					<label for="alpha">
						<input type="checkbox" id="alpha"> All Opaque
					</label>
					<label for="toggleGrid">
						<input type="checkbox" id="toggleGrid"> Show Grid
					</label>

					<label for="toggleSource">
						<input type="checkbox" id="toggleSource" checked>Use Edited Image
					</label>

					<button id="quantize-tile-btn" disabled title="Quantize and tile the image">Quantize & Tile</button>
					<label for="zoom">Scale Canvas</label>
					<input type="range" id="zoom" min=".1" max="3" step=".1" value="1" title="Zoom level">
				</div>
			</div>

			<!-- TOOLS -->
			<div class="sidebar-section snapped">
				<h3>Drawing Tools</h3>
				<div class="section-content" id="controls">

					<fieldset>
						<legend class="sr-only">Select a drawing tool</legend>

						<label title="Use brush">
							<input type="radio" name="toolMode" value="brush">
							<i class="fa-solid fa-paintbrush" aria-hidden="true"></i> Brush
						</label>

						<label title="Use eraser">
							<input type="radio" name="toolMode" value="eraser">
							<i class="fa-solid fa-eraser" aria-hidden="true"></i> Eraser
						</label>

						<label title="Flood fill">
							<input type="radio" name="toolMode" value="fillRegion">
							<i class="fa-solid fa-fill-drip" aria-hidden="true"></i> Flood Fill
						</label>
					</fieldset>
<br>
					<label for="modeSelect">Drawing Mirror Mode</label>
					<select id="modeSelect" title="Choose drawing mode">
						<option value="N">Normal</option>
						<option value="H">Horizontal Mirror</option>
						<option value="V">Vertical Mirror</option>
						<option value="B">Both H+V</option>
						<option value="D">Diagonal</option>
					</select>

					<div id="display" title="Tool preview" aria-live="polite"></div>
				</div>
			</div>

			<!-- COLORS -->
			<div class="sidebar-section snapped">
				<h3>Colors & Palette</h3>
				<div class="section-content">
					<!-- <button id="createPalette" title="Create a new color palette">Create Palette</button> -->
					<button id="eraseBtn" title="Erase the selected color">Erase Selected Color</button>




					<div id="color-palette" title="Palette display" aria-label="Palette display"></div>
					<div class="swatches" id="swatchesContainer" title="Saved color swatches"
						aria-label="Saved color swatches"></div>
				</div>
				<input type="color" id="colorPicker" class="circle-picker" value="#ff0000" title="Pick a color">
				<div id="hexDisplay" role="button" tabindex="0" aria-label="Copy hex color to clipboard">
					<span id="hexValue">#ff0000</span>
					<span id="copyLabel">Copy to Clipboard</span>
				</div>
			</div>

			<!-- LOGS -->
			<div class="sidebar-section snapped">
				<h3>Logs</h3>
				<div class="section-content">
					<label>
						<input type="checkbox" id="show-logs-checkbox" checked> Show Logs
					</label>
					<div id="log-panel" title="Log output" aria-live="polite">LOGS</div>
				</div>
			</div>

		</div>
	</div>
</body>

</html>